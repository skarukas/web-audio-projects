<!DOCTYPE html>
<html>
    <head>
        <title>Ambient JI Generator</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
    </head>
    <body>
        <h1 class="center">Generative Ambient JI Music!</h1>
        <div class="controls">
            <div class="container">
                <button type="button" id="play-button" onclick="play()">Play</button>
            </div>
            <p class="center">Volume</p>
            <div class="container">
                <input title="Volume" type="range" min="0.0" max="1.0" step="0.01" value="0.5" id="volume">
            </div>
            <p class="center" id="limit-label">JI Limit: 9</p>
            <div class="container">
                <input title="Limit" type="range" min="2" max="25" step="1" value="9" id="limit">
            </div>
            <p class="center" id="bend-label">Pitch Bend Probability: 20%</p>
            <div class="container">
                <input title="Pitch Bend Probability" type="range" min="0" max="100" step="1" value="20" id="bend-slider">
            </div>
        </div>
        <br/>
        <div class="info">
            <h2 class="center">How It Works</h2>
            <ol>
                <li>Every second, the fundamental frequency of all currently sounding frequencies is calculated.*</li>
                <li>A random harmonic (2 &lt= <em>n</em> &lt= <em>limit</em>) of this fundamental is generated. If there aren't any existing frequencies, a random frequency is generated instead.</li>
                <li>This new frequency is normalized to the range of 128-2056 Hz.</li>
                <li>Repeat!</li>
            </ol>
            <p> Each tone generated lasts between 2 and 5 seconds, and the fundamental frequency will slowly evolve as certain notes appear and disappear. They'll have a slight (slow) pitch bend a certain percentage of the time, just for fun.</p>
            <em>*This is calculated quick and dirty, by finding an unreliable sort of GCD (greatest common divisor) of a set of floating-point numbers. The fundamental will occasionally be erroneously calculated as a low number (&lt 5 Hz) meaning the generated tones may be very close together and dissonant. Sorry :(</em>
        </div>
        <script src="random-harmonics.js"></script>
        <script src="webaudio-playback.js"></script>
    </body>
</html>